# 止损

## 交易所止损
`stoploss_on_exchange`
启用或禁用交易所止损。如果止损位于交易所，则意味着在买入订单成交后立即在交易所下达止损限价单。

`stoploss_on_exchange_limit_ratio`
到达止损点后进行限价退出操作，限价 = market * ratio
止损价将在 market price和limit price之间。

`stoploss_on_exchange_interval`
设置多久检查和更新一次止损订单。默认值为 60（1 分钟）。
例如，如果意外在交易所取消了止损订单，将在60s重新设置这个止损订单。如果使用追踪止损，那么会在interval之后更新止损单。但是这个值不能太小，否则会因为频率过高被交易所禁止。<br>


交易所止损，优势在于直接在交易所挂止损单，止损价格清晰可见。并且在免受市场突然崩溃的影响，因为订单执行完全发生在交易所内，没有潜在的网络开销。劣势在于无法止损价格无法按照比较高的频率更新，因为交易所存在接口限制。


## 止损类型

### 静态止损
`stoploss = -0.10`
基本成本价止损

### 追踪止损 
`trailing_stop = True`
每次资产价格上涨时，该算法都会自动上调止损.
止损将调整为始终为观察到的最高价格的x%。

### 追踪止损 - 自定义正损
允许收益跨过一个界限之后，改变止损比列。
`trailing_stop_positive = 0.02`
`trailing_stop_positive_offset = 0.0`
达到trailing_stop_positive_offset指定的收益之前，使用
stoploss静态止损，达到trailing_stop_positive_offset指定的收益之后，使用trailing_stop_positive静态止损。

`trailing_only_offset_is_reached = True`
当收益reach offset时没开始按照trailing_stop_positive进行追踪止损。


## 杠杆止损
止损百分比是根据本金计算的。在杠杆模式下。
10 倍交易的 10% 止损将在 1% 的价格变动时触发。如果本金金额为 100 美元，该交易在 10 倍杠杆后的交易金额将为 1000 美元。如果价格变动1% - 损失了 10 美元的自有资金 - 因此在这种情况下将触发止损。