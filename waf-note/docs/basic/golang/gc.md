## 内存管理
https://zhuanlan.zhihu.com/p/269621141
## 垃圾回收
https://zhuanlan.zhihu.com/p/297177002
https://developer.aliyun.com/article/775798

### 垃圾回收的意义
长时间允许可能导致内存占满

垃圾回收器主要包括三个目标：

- 无内存泄漏：垃圾回收器最基本的目标就是减少防止程序员未及时释放导致的内存泄漏，垃圾回收器会识别并清理内存中的垃圾
- 自动回收无用内存：垃圾回收器作为独立的子任务，不需要程序员显式调用即可自动清理内存垃圾
- 内存整理：如果只是简单回收无用内存，那么堆上的内存空间会存在较多碎片而无法满足分配较大对象的需求，因此垃圾回收器需要重整内存空间，提高内存利用率


### 为什么c++无法自动回收内存
指针偏移

### golang垃圾回收
采用三色标级发

利用写屏障，减少STW的时间
在标记的过程中，本来要被回收的内存。goroutine运行中又有对象引用这个内存。就会导致错误的内存回收。所有STW。
但是可以采用写屏障的方式，来阻止这种情景。 goroutine运行中又有对象引用这个内存时，通过写屏障hook，标记该片内存为引用中，这次不回收。下次gc再判断。






## 参考
https://zhuanlan.zhihu.com/p/297177002